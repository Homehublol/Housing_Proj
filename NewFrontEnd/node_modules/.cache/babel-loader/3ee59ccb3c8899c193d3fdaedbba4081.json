{"ast":null,"code":"const {\n  google\n} = window;\nconst priceCenterCoordinates = '32.8797,-117.2362';\nconst DistanceMatrixService = new google.maps.DistanceMatrixService();\n/**\n * Gets the duration of a trip on an average day from address to Price Center\n * @param address - the address to get duration (from address to Price Center)\n * @return - There are two return options:\n *           1) the duration (type google.maps.Duration has a string and number\n *           representation of the duration, where the number is in seconds), OR\n *           2) undefined if there were zero results (no route could be found to UCSD\n *           with transit options)\n * @error - throws an error if the address is not recognizable by Google\n */\n\nconst getDuration = async (address) => {\n  return new Promise((resolve, reject) => {\n    DistanceMatrixService.getDistanceMatrix({\n      origins: [address],\n      destinations: [priceCenterCoordinates],\n      travelMode: google.maps.TravelMode.TRANSIT,\n      transitOptions: {\n        arrivalTime: new Date(),\n        // TODO need to put a constant date!\n        modes: [google.maps.TransitMode.BUS]\n      },\n      unitSystem: google.maps.UnitSystem.IMPERIAL\n    }, (response, status) => {\n      if (status === google.maps.DistanceMatrixStatus.OK) {\n        // check the resulting element for success or failure\n        const result = response.rows[0].elements[0];\n        const Statuses = google.maps.DistanceMatrixElementStatus;\n\n        if (result.status === Statuses.OK) {\n          resolve(result.duration);\n        } else if (result.status === Statuses.ZERO_RESULTS) {\n          // TODO need to add fallback here (i.e. use driving instead), but also somehow handle telling users that there is no public transportation route\n          resolve(undefined);\n        } else if (result.status === Statuses.NOT_FOUND) {\n          reject(result.status);\n        }\n      } else {\n        console.error(`The getDuration failed, with status: ${status}`);\n        reject(status);\n      }\n    });\n  });\n};\n/**\n * Gets the duration of a trip on an average day from address to Price Center\n * in minutes, as a string\n * @param address - the address to get duration (from address to Price Center)\n * @return - There are two return options:\n *           1) minutes from the address to Price Center, as a string (i.e. 128 min)\n *           2) undefined if there were zero results (no route could be found to UCSD\n *           with transit options)\n * @error - throws an error if the address is not recognizable by Google\n */\n\n\nconst getDurationInMinutes = async (address) => {\n  const result = await getDuration(address);\n  if (!result) return undefined;\n  const minutes = result.value / 60;\n  return `${minutes} min`;\n};\n/**\n * Function to test getDuration\n */\n\n\nconst testGetDuration = async () => {\n  const tests = ['9775 Genesee Ave, San Diego, CA 92121', '4313 Cozzens Ct, San Diego, CA 92122', '4588 Robbins St, San Diego, CA 92122', '11645 Thistle Hill Pl, San Diego, CA 92130', '28466 Foothill Dr, Agoura Hills, CA 91301'];\n  tests.forEach(address => {\n    getDuration(address).then(result => {\n      console.log(`The result for the address ${address} is:`);\n      console.log(result);\n    });\n  });\n};\n\nexport { getDuration, getDurationInMinutes, testGetDuration };","map":{"version":3,"sources":["/Users/yijianzong/Documents/GitHub/Housing_Proj/NewFrontEnd/src/apis/google.ts"],"names":["google","window","priceCenterCoordinates","DistanceMatrixService","maps","getDuration","address","Promise","resolve","reject","getDistanceMatrix","origins","destinations","travelMode","TravelMode","TRANSIT","transitOptions","arrivalTime","Date","modes","TransitMode","BUS","unitSystem","UnitSystem","IMPERIAL","response","status","DistanceMatrixStatus","OK","result","rows","elements","Statuses","DistanceMatrixElementStatus","duration","ZERO_RESULTS","undefined","NOT_FOUND","console","error","getDurationInMinutes","minutes","value","testGetDuration","tests","forEach","then","log"],"mappings":"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","sourcesContent":["const { google } = window;\n\nconst priceCenterCoordinates = '32.8797,-117.2362';\nconst DistanceMatrixService = new google.maps.DistanceMatrixService();\n\n/**\n * Gets the duration of a trip on an average day from address to Price Center\n * @param address - the address to get duration (from address to Price Center)\n * @return - There are two return options:\n *           1) the duration (type google.maps.Duration has a string and number\n *           representation of the duration, where the number is in seconds), OR\n *           2) undefined if there were zero results (no route could be found to UCSD\n *           with transit options)\n * @error - throws an error if the address is not recognizable by Google\n */\nconst getDuration = async (\n  address: string,\n): Promise<google.maps.Duration | undefined> => {\n  return new Promise((resolve, reject) => {\n    DistanceMatrixService.getDistanceMatrix(\n      {\n        origins: [address],\n        destinations: [priceCenterCoordinates],\n        travelMode: google.maps.TravelMode.TRANSIT,\n        transitOptions: {\n          arrivalTime: new Date(), // TODO need to put a constant date!\n          modes: [google.maps.TransitMode.BUS],\n        },\n        unitSystem: google.maps.UnitSystem.IMPERIAL,\n      },\n      (response, status) => {\n        if (status === google.maps.DistanceMatrixStatus.OK) {\n          // check the resulting element for success or failure\n          const result = response.rows[0].elements[0];\n          const Statuses = google.maps.DistanceMatrixElementStatus;\n\n          if (result.status === Statuses.OK) {\n            resolve(result.duration);\n          } else if (result.status === Statuses.ZERO_RESULTS) {\n            // TODO need to add fallback here (i.e. use driving instead), but also somehow handle telling users that there is no public transportation route\n            resolve(undefined);\n          } else if (result.status === Statuses.NOT_FOUND) {\n            reject(result.status);\n          }\n        } else {\n          console.error(`The getDuration failed, with status: ${status}`);\n          reject(status);\n        }\n      },\n    );\n  });\n};\n\n/**\n * Gets the duration of a trip on an average day from address to Price Center\n * in minutes, as a string\n * @param address - the address to get duration (from address to Price Center)\n * @return - There are two return options:\n *           1) minutes from the address to Price Center, as a string (i.e. 128 min)\n *           2) undefined if there were zero results (no route could be found to UCSD\n *           with transit options)\n * @error - throws an error if the address is not recognizable by Google\n */\nconst getDurationInMinutes = async (\n  address: string,\n): Promise<string | undefined> => {\n  const result = await getDuration(address);\n  if (!result) return undefined;\n\n  const minutes = result.value / 60;\n\n  return `${minutes} min`;\n};\n\n/**\n * Function to test getDuration\n */\nconst testGetDuration = async () => {\n  const tests = [\n    '9775 Genesee Ave, San Diego, CA 92121',\n    '4313 Cozzens Ct, San Diego, CA 92122',\n    '4588 Robbins St, San Diego, CA 92122',\n    '11645 Thistle Hill Pl, San Diego, CA 92130',\n    '28466 Foothill Dr, Agoura Hills, CA 91301',\n  ];\n\n  tests.forEach((address) => {\n    getDuration(address).then((result) => {\n      console.log(`The result for the address ${address} is:`);\n      console.log(result);\n    });\n  });\n};\n\nexport { getDuration, getDurationInMinutes, testGetDuration };\n"]},"metadata":{},"sourceType":"module"}