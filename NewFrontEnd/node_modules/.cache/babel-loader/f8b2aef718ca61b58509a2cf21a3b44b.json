{"ast":null,"code":"var _jsxFileName = \"/Users/yijianzong/Documents/GitHub/Housing_Proj/NewFrontEnd/src/components/FilterForm/index.tsx\";\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { searchHousingPosts } from '../../redux/slices/housing';\nimport FilterPage1, { page1InitialStore, page1Schema } from './FilterPage1';\nimport FilterPage2, { page2InitialStore, page2Schema } from './FilterPage2';\nimport FilterPage3, { page3InitialStore, page3Schema } from './FilterPage3';\nimport FilterPage4, { page4InitialStore, page4Schema } from './FilterPage4';\nimport FilterPage5, { page5InitialStore, page5Schema } from './FilterPage5';\nimport FilterPage6, { page6InitialStore, page6Schema } from './FilterPage6';\nimport WizardForm from '../WizardForm';\nimport { RoomType } from '../../assets/constants';\n\nconst enumKeyFromStringValue = (e, v) => {\n  const keys = Object.keys(e).filter(x => e[x] === v);\n  return keys.length > 0 ? {\n    key: keys[0],\n    success: true\n  } : {\n    key: undefined,\n    success: false\n  };\n};\n\nconst checkSuccess = result => {\n  return result.success;\n};\n\nconst initialStore = [page1InitialStore, page2InitialStore, page3InitialStore, page4InitialStore, page5InitialStore, page6InitialStore];\nconst schemas = [page1Schema, page2Schema, page3Schema, page4Schema, page5Schema, page6Schema]; // TODO: this is still the old filter format. update\n// to new one ASAP!\n\nconst formatRequest = s => {\n  // const roomSelections: RoomLiteralType[] = [\n  //   'single',\n  //   'double',\n  //   'triple',\n  //   'livingRoom',\n  //   'suite',\n  //   'studio',\n  // ];\n  const otherPrefs = ['female', 'male', 'lgbtq', 'pets', '_420'];\n  const facilities = ['parking', 'privateBath'];\n  const selectedRooms = s.roomTypes.reduce((result, type) => {\n    const r = enumKeyFromStringValue(RoomType, type);\n\n    if (checkSuccess(r)) {\n      result.push(r.key);\n    }\n\n    return result;\n  }, []); // const selectedPrefs = otherPrefs.reduce<PreferenceLiteralType[]>(\n  //   (result, preference) => {\n  //     const r = enumKeyFromStringValue(, type)\n  //   }\n  // );\n\n  return {\n    distance: `${s.distance} mins`,\n    roomType: selectedRooms,\n    stayPeriod: s.stayPeriod,\n    priceMin: s.minPrice,\n    priceMax: s.maxPrice,\n    earlyInterval: s.earlyInterval,\n    earlyMonth: s.earlyMonth,\n    lateInterval: s.lateInterval,\n    lateMonth: s.lateMonth,\n    other: [],\n    // TODO fix\n    facilities: [] // TODO fix\n\n  };\n};\n\nconst FilterForm = ({\n  show,\n  setShow\n}) => {\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(WizardForm, {\n    show: show,\n    setShow: setShow,\n    onSubmit: n => {\n      console.log('clicked');\n      console.log(n);\n      const formattedRequest = formatRequest(n);\n      console.log(formattedRequest);\n      dispatch(searchHousingPosts(formattedRequest));\n      return true;\n    },\n    title: \"Filter & Match\",\n    initialStore: initialStore,\n    schemas: schemas,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FilterPage1, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterPage2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterPage3, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterPage4, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterPage5, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterPage6, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default FilterForm;","map":{"version":3,"sources":["/Users/yijianzong/Documents/GitHub/Housing_Proj/NewFrontEnd/src/components/FilterForm/index.tsx"],"names":["React","useDispatch","searchHousingPosts","FilterPage1","page1InitialStore","page1Schema","FilterPage2","page2InitialStore","page2Schema","FilterPage3","page3InitialStore","page3Schema","FilterPage4","page4InitialStore","page4Schema","FilterPage5","page5InitialStore","page5Schema","FilterPage6","page6InitialStore","page6Schema","WizardForm","RoomType","enumKeyFromStringValue","e","v","keys","Object","filter","x","length","key","success","undefined","checkSuccess","result","initialStore","schemas","formatRequest","s","otherPrefs","facilities","selectedRooms","roomTypes","reduce","type","r","push","distance","roomType","stayPeriod","priceMin","minPrice","priceMax","maxPrice","earlyInterval","earlyMonth","lateInterval","lateMonth","other","FilterForm","show","setShow","dispatch","n","console","log","formattedRequest"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { searchHousingPosts } from '../../redux/slices/housing';\nimport FilterPage1, {\n  Page1Store,\n  page1InitialStore,\n  page1Schema,\n} from './FilterPage1';\nimport FilterPage2, {\n  Page2Store,\n  page2InitialStore,\n  page2Schema,\n} from './FilterPage2';\nimport FilterPage3, {\n  Page3Store,\n  page3InitialStore,\n  page3Schema,\n} from './FilterPage3';\nimport FilterPage4, {\n  Page4Store,\n  page4InitialStore,\n  page4Schema,\n} from './FilterPage4';\nimport FilterPage5, {\n  Page5Store,\n  page5InitialStore,\n  page5Schema,\n} from './FilterPage5';\nimport FilterPage6, {\n  Page6Store,\n  page6InitialStore,\n  page6Schema,\n} from './FilterPage6';\nimport WizardForm from '../WizardForm';\nimport {\n  FilterModel,\n  PreferenceLiteralType,\n  Preferences,\n  RoomLiteralType,\n} from '../../assets/models/FilterModel';\nimport { RoomType } from '../../assets/constants';\n\ntype enumCheckSuccess<T extends { [index: string]: string }> = {\n  key: keyof T;\n  success: boolean;\n};\ntype enumCheckFail = { key: undefined; success: boolean };\nconst enumKeyFromStringValue = <T extends { [index: string]: string }>(\n  e: T,\n  v: string,\n): enumCheckSuccess<T> | enumCheckFail => {\n  const keys = Object.keys(e).filter((x) => e[x] === v);\n  return keys.length > 0\n    ? {\n        key: keys[0],\n        success: true,\n      }\n    : {\n        key: undefined,\n        success: false,\n      };\n};\nconst checkSuccess = <T extends { [index: string]: string }>(\n  result: enumCheckSuccess<T> | enumCheckFail,\n): result is enumCheckSuccess<T> => {\n  return result.success;\n};\n\ntype Store = Page1Store &\n  Page2Store &\n  Page3Store &\n  Page4Store &\n  Page5Store &\n  Page6Store;\n\nconst initialStore = [\n  page1InitialStore,\n  page2InitialStore,\n  page3InitialStore,\n  page4InitialStore,\n  page5InitialStore,\n  page6InitialStore,\n];\n\nconst schemas = [\n  page1Schema,\n  page2Schema,\n  page3Schema,\n  page4Schema,\n  page5Schema,\n  page6Schema,\n];\n\n// TODO: this is still the old filter format. update\n// to new one ASAP!\nconst formatRequest = (s: Store): FilterModel => {\n  // const roomSelections: RoomLiteralType[] = [\n  //   'single',\n  //   'double',\n  //   'triple',\n  //   'livingRoom',\n  //   'suite',\n  //   'studio',\n  // ];\n  const otherPrefs: PreferenceLiteralType[] = [\n    'female',\n    'male',\n    'lgbtq',\n    'pets',\n    '_420',\n  ];\n  const facilities: PreferenceLiteralType[] = ['parking', 'privateBath'];\n\n  const selectedRooms = s.roomTypes.reduce<RoomLiteralType[]>(\n    (result, type) => {\n      const r = enumKeyFromStringValue(RoomType, type);\n      if (checkSuccess(r)) {\n        result.push(r.key);\n      }\n      return result;\n    },\n    [],\n  );\n\n  // const selectedPrefs = otherPrefs.reduce<PreferenceLiteralType[]>(\n  //   (result, preference) => {\n  //     const r = enumKeyFromStringValue(, type)\n  //   }\n  // );\n\n  return {\n    distance: `${s.distance} mins`,\n    roomType: selectedRooms,\n    stayPeriod: s.stayPeriod,\n    priceMin: s.minPrice,\n    priceMax: s.maxPrice,\n    earlyInterval: s.earlyInterval as string,\n    earlyMonth: s.earlyMonth as string,\n    lateInterval: s.lateInterval as string,\n    lateMonth: s.lateMonth as string,\n    other: [], // TODO fix\n    facilities: [], // TODO fix\n  };\n};\n\ninterface FilterFormProps {\n  show: boolean;\n  setShow: (show: boolean) => void;\n}\n\nconst FilterForm: React.FC<FilterFormProps> = ({ show, setShow }) => {\n  const dispatch = useDispatch();\n  return (\n    <WizardForm<Store>\n      show={show}\n      setShow={setShow}\n      onSubmit={(n) => {\n        console.log('clicked');\n        console.log(n);\n        const formattedRequest = formatRequest(n);\n        console.log(formattedRequest);\n        dispatch(searchHousingPosts(formattedRequest));\n        return true;\n      }}\n      title=\"Filter & Match\"\n      initialStore={initialStore}\n      schemas={schemas}\n    >\n      <FilterPage1 />\n      <FilterPage2 />\n      <FilterPage3 />\n      <FilterPage4 />\n      <FilterPage5 />\n      <FilterPage6 />\n    </WizardForm>\n  );\n};\n\nexport default FilterForm;\n"]},"metadata":{},"sourceType":"module"}