{"ast":null,"code":"var _jsxFileName = \"/Users/yijianzong/Documents/GitHub/Housing_Proj/NewFrontEnd/src/components/ProfileModal.tsx\";\nimport React, { useState } from 'react';\nimport { Button, Col, Container, Form, Modal, Row } from 'react-bootstrap';\nimport { miscIcons, profileIcons } from '../assets/icons/all';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, selectUserDraft, setUserDraft } from '../redux/slices/auth';\nimport { logout, editProfile } from '../redux/slices/auth';\nimport Image from 'react-bootstrap/Image';\n\nconst phoneFormat = (phone, previousPhone) => {\n  const phoneRegex = /\\d+/;\n  const charArray = [];\n  const limit = 14;\n  var i;\n\n  for (i = 0; i < Math.min(phone.length, limit); i++) {\n    if (phone[i].match(phoneRegex)) {\n      charArray.push(phone[i]);\n    }\n  }\n\n  if (previousPhone.length > phone.length && // if it is a delete operation\n  phone.length > 0 && // if it is non empty\n  !previousPhone[previousPhone.length - 1].match(phoneRegex)) {\n    charArray.pop();\n  }\n\n  const bracket = charArray.length >= 3;\n  const space = charArray.length > 3;\n  const horizontal = charArray.length > 6;\n\n  if (horizontal) {\n    charArray.splice(6, 0, '-');\n  }\n\n  if (space) {\n    charArray.splice(3, 0, ' ');\n  }\n\n  if (bracket) {\n    charArray.splice(0, 0, '(');\n    charArray.splice(4, 0, ')');\n  }\n\n  return charArray.join('');\n};\n\nconst dummyUser = {\n  name: '',\n  email: '',\n  token: '',\n  description: '',\n  major: '',\n  schoolYear: '',\n  phone: ''\n};\n\nconst ProfileModal = ({\n  show,\n  setShow\n}) => {\n  const userSelected = useSelector(selectUser) || dummyUser;\n  const userSelectedDraft = useSelector(selectUserDraft) || dummyUser;\n  const dispatch = useDispatch();\n  const [activeIndicator, setactiveIndicator] = useState(true);\n  return /*#__PURE__*/React.createElement(Modal, {\n    dialogClassName: \"wizard-form-modal-dialog\",\n    show: show,\n    onHide: () => setShow(false),\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-100 w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-form-top-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"no-show\",\n    className: \"mr-auto\",\n    onClick: () => setShow(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(miscIcons.orangeX, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"title mr-auto ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"Edit Profile\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-form-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    className: \"profile-info align-self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-wrap mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: 'https://houseit.s3.us-east-2.amazonaws.com/ambar%40ucsd.edu/profile/Mask+Group-1.jpg',\n    roundedCircle: true,\n    className: \"profile-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Jacob Jones\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-verified\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(profileIcons.tickMark, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }), \"UCSD Email Verified\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"profile-sign-out\",\n    variant: \"no-show\",\n    onClick: () => {\n      dispatch(logout());\n      setShow(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, \"Log Out\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5 profile-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, activeIndicator ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => setactiveIndicator(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, \"Edit Profile\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => {\n      setactiveIndicator(true);\n      dispatch(editProfile(userSelected.email, {\n        description: userSelectedDraft.description,\n        phone: userSelectedDraft.ph\n      })); // TODO: if nothing changes upon confirm, no need to send to backend\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"Confirm\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-1 profile-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"profile-cancel\",\n    variant: \"no-show\",\n    onClick: () => {\n      setactiveIndicator(true);\n      dispatch(setUserDraft(userSelected));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Cancel\"))))), /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    className: \"justify-content-center m-2 my-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"profileEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"profile-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, \"School Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    className: \"single-line-input\",\n    type: \"email\",\n    disabled: true,\n    value: userSelectedDraft.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"profilePhone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"profile-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n    readOnly: activeIndicator,\n    className: \"single-line-input\",\n    type: \"text\",\n    value: userSelectedDraft.phone,\n    onChange: event => {\n      console.log(userSelected, 'hello');\n      const previousPhone = userSelectedDraft.phone;\n      dispatch(setUserDraft({ ...userSelectedDraft,\n        phone: phoneFormat(event.target.value, previousPhone)\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Row, {\n    className: \"m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"profileMajor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"profile-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, \"Major\"), /*#__PURE__*/React.createElement(Form.Control, {\n    readOnly: activeIndicator,\n    className: \"single-line-input\",\n    type: \"text\",\n    value: userSelectedDraft.major,\n    onChange: event => dispatch(setUserDraft({ ...userSelectedDraft,\n      major: event.target.value\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Row, {\n    className: \"m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"profileBio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"profile-form-bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, \"Tell us about yourself in a short bio\"), /*#__PURE__*/React.createElement(Form.Control, {\n    readOnly: activeIndicator,\n    as: \"textarea\",\n    className: \"single-line-input profile-bio-text\",\n    type: \"text\",\n    maxLength: 600,\n    value: userSelectedDraft.description,\n    onChange: event => dispatch(setUserDraft({ ...userSelectedDraft,\n      description: event.target.value\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"profile-char-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, userSelectedDraft.description.length, \"/600\")))))))));\n};\n\nexport default ProfileModal;","map":{"version":3,"sources":["/Users/yijianzong/Documents/GitHub/Housing_Proj/NewFrontEnd/src/components/ProfileModal.tsx"],"names":["React","useState","Button","Col","Container","Form","Modal","Row","miscIcons","profileIcons","useSelector","useDispatch","selectUser","selectUserDraft","setUserDraft","logout","editProfile","Image","phoneFormat","phone","previousPhone","phoneRegex","charArray","limit","i","Math","min","length","match","push","pop","bracket","space","horizontal","splice","join","dummyUser","name","email","token","description","major","schoolYear","ProfileModal","show","setShow","userSelected","userSelectedDraft","dispatch","activeIndicator","setactiveIndicator","ph","event","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Button, Col, Container, Form, Modal, Row } from 'react-bootstrap';\nimport { miscIcons, profileIcons } from '../assets/icons/all';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  selectUser,\n  selectUserDraft,\n  setUser,\n  setUserDraft,\n} from '../redux/slices/auth';\nimport { logout, editProfile } from '../redux/slices/auth';\nimport Image from 'react-bootstrap/Image';\n\ninterface PathProps {\n  show: boolean;\n  setShow: (show: boolean) => void;\n}\n\nconst phoneFormat = (phone: string, previousPhone: string) => {\n  const phoneRegex = /\\d+/;\n  const charArray = [];\n  const limit = 14;\n  var i;\n  for (i = 0; i < Math.min(phone.length, limit); i++) {\n    if (phone[i].match(phoneRegex)) {\n      charArray.push(phone[i]);\n    }\n  }\n  if (\n    previousPhone.length > phone.length && // if it is a delete operation\n    phone.length > 0 && // if it is non empty\n    !previousPhone[previousPhone.length - 1].match(phoneRegex)\n  ) {\n    charArray.pop();\n  }\n  const bracket = charArray.length >= 3;\n  const space = charArray.length > 3;\n  const horizontal = charArray.length > 6;\n  if (horizontal) {\n    charArray.splice(6, 0, '-');\n  }\n  if (space) {\n    charArray.splice(3, 0, ' ');\n  }\n  if (bracket) {\n    charArray.splice(0, 0, '(');\n    charArray.splice(4, 0, ')');\n  }\n  return charArray.join('');\n};\n\nconst dummyUser = {\n  name: '',\n  email: '',\n  token: '',\n  description: '',\n  major: '',\n  schoolYear: '',\n  phone: '',\n};\nconst ProfileModal: React.FC<PathProps> = ({ show, setShow }) => {\n  const userSelected = useSelector(selectUser) || dummyUser;\n  const userSelectedDraft = useSelector(selectUserDraft) || dummyUser;\n  const dispatch = useDispatch();\n  const [activeIndicator, setactiveIndicator] = useState(true);\n  return (\n    <Modal\n      dialogClassName=\"wizard-form-modal-dialog\"\n      show={show}\n      onHide={() => setShow(false)}\n      centered\n    >\n      <div className=\"h-100 w-100\">\n        {/* TODO add border-radius to top and bottom rows */}\n        <div className=\"profile-form-top-bar\">\n          <Button\n            variant=\"no-show\"\n            className=\"mr-auto\"\n            onClick={() => setShow(false)}\n          >\n            <miscIcons.orangeX />\n          </Button>\n          <span className=\"title mr-auto ml-auto\">Edit Profile</span>\n        </div>\n\n        {/* TODO <div className=\"d-flex align-items-center justify-content-around h-100\"> */}\n        <div className=\"profile-form-middle\">\n          <Container>\n            <Row>\n              <Col md={4} className=\"profile-info align-self-center\">\n                <div className=\"profile-wrap mb-2\">\n                  <Image\n                    src={\n                      'https://houseit.s3.us-east-2.amazonaws.com/ambar%40ucsd.edu/profile/Mask+Group-1.jpg'\n                    }\n                    roundedCircle\n                    className=\"profile-icon\"\n                  />\n                </div>\n                <div className=\"profile-name\">Jacob Jones</div>\n                <div className=\"profile-verified\">\n                  <profileIcons.tickMark />\n                  UCSD Email Verified\n                </div>\n                <div className=\"profile-wrap\">\n                  <Button\n                    className=\"profile-sign-out\"\n                    variant=\"no-show\"\n                    onClick={() => {\n                      dispatch(logout());\n                      setShow(false);\n                    }}\n                  >\n                    Log Out\n                  </Button>\n                </div>\n                <div className=\"mt-5 profile-wrap\">\n                  {activeIndicator ? (\n                    <Button\n                      variant=\"secondary\"\n                      onClick={() => setactiveIndicator(false)}\n                    >\n                      Edit Profile\n                    </Button>\n                  ) : (\n                    <div className=\"flex-column\">\n                      <div>\n                        <Button\n                          variant=\"secondary\"\n                          onClick={() => {\n                            setactiveIndicator(true);\n                            dispatch(editProfile(userSelected.email,{\n                              description:userSelectedDraft.description,phone:userSelectedDraft.ph})); // TODO: if nothing changes upon confirm, no need to send to backend\n                          }}\n                        >\n                          Confirm\n                        </Button>\n                      </div>\n                      <div className=\"mt-1 profile-wrap\">\n                        <Button\n                          className=\"profile-cancel\"\n                          variant=\"no-show\"\n                          onClick={() => {\n                            setactiveIndicator(true);\n                            dispatch(setUserDraft(userSelected));\n                          }}\n                        >\n                          Cancel\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </Col>\n              <Col md={8}>\n                <Form.Row className=\"justify-content-center m-2 my-4\">\n                  <Form.Group as={Col} controlId=\"profileEmail\">\n                    <Form.Label className=\"profile-form-label\">\n                      School Email\n                    </Form.Label>\n                    <Form.Control\n                      className=\"single-line-input\"\n                      type=\"email\"\n                      disabled\n                      value={userSelectedDraft.email}\n                    ></Form.Control>\n                  </Form.Group>\n                  <Form.Group as={Col} controlId=\"profilePhone\">\n                    <Form.Label className=\"profile-form-label\">\n                      Phone\n                    </Form.Label>\n                    <Form.Control\n                      readOnly={activeIndicator}\n                      className=\"single-line-input\"\n                      type=\"text\"\n                      value={userSelectedDraft.phone}\n                      onChange={(event) => {\n                        console.log(userSelected, 'hello');\n                        const previousPhone = userSelectedDraft.phone;\n                        dispatch(\n                          setUserDraft({\n                            ...userSelectedDraft,\n                            phone: phoneFormat(\n                              event.target.value,\n                              previousPhone,\n                            ),\n                          }),\n                        );\n                      }}\n                    ></Form.Control>\n                  </Form.Group>\n                </Form.Row>\n                <Form.Row className=\"m-2\">\n                  <Form.Group as={Col} controlId=\"profileMajor\">\n                    <Form.Label className=\"profile-form-label\">\n                      Major\n                    </Form.Label>\n                    <Form.Control\n                      readOnly={activeIndicator}\n                      className=\"single-line-input\"\n                      type=\"text\"\n                      value={userSelectedDraft.major}\n                      onChange={(event) =>\n                        dispatch(\n                          setUserDraft({\n                            ...userSelectedDraft,\n                            major: event.target.value,\n                          }),\n                        )\n                      }\n                    ></Form.Control>\n                  </Form.Group>\n                </Form.Row>\n                <Form.Row className=\"m-2\">\n                  <Form.Group as={Col} controlId=\"profileBio\">\n                    <Form.Label className=\"profile-form-bio\">\n                      Tell us about yourself in a short bio\n                    </Form.Label>\n                    <Form.Control\n                      readOnly={activeIndicator}\n                      as=\"textarea\"\n                      className=\"single-line-input profile-bio-text\"\n                      type=\"text\"\n                      maxLength={600}\n                      value={userSelectedDraft.description}\n                      onChange={(event) =>\n                        dispatch(\n                          setUserDraft({\n                            ...userSelectedDraft,\n                            description: event.target.value,\n                          }),\n                        )\n                      }\n                    ></Form.Control>\n                    <span className=\"profile-char-check\">\n                      {userSelectedDraft.description.length}/600\n                    </span>\n                  </Form.Group>\n                </Form.Row>\n              </Col>\n            </Row>\n          </Container>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ProfileModal;\n"]},"metadata":{},"sourceType":"module"}